# Kastor keyboard

※これは Kastor シリーズ試作第二版の紹介です。前作の組み立てガイドなどは [こちら](https://github.com/zk-phi/kastor-keyboard/tree/d3c9b8dbbd1859bec58dde376e5eee4f9685b5a4) からどうぞ。

![Kastor](images/kastor2.jpg)

独自配列の 30% キーボードシリーズの試作第二版です。

特徴

- 内部の空洞を減らした独自の積層ケースで打鍵音＆デザイン性を向上
  - 打鍵音参考 https://twitter.com/zk_phi/status/1164212374150111237
- 最下段を親指で押しやすくした独自配列を採用

前作の独自配列と比較すると

- デザイン性のため、親指キーを手前にせり出させる仕様を廃止
- 代わりに最下段を外側に向かって 0.25u だけずらした新しい配列を採用、シンメトリーは諦め

となっています。

試作品のため、わかる人向けです

## 注意

![プレートの設計ミス](images/plate_bug.png)

設定ミスにより、上辺と底辺でネジ穴の位置が微妙にずれています。

これによって、一見上下対称に見える右手のプレートなども表裏を合わせないとネジが通りません。

組み立て時は注意してください。

## パーツ

![プレートたち](images/plates.jpg)

- Kastor Rev.2 Kit
  - 基板２枚
  - 底板２枚
  - ボトムプレート２枚
  - ローワーミドルフレーム２枚
  - ミドルフレーム 上側・下側各２枚
  - ローワートッププレート２枚
  - トッププレート２枚
  - トップフレーム 薄・厚各２枚
- キースイッチ x36
- ダイオード 1N4148w x38
- TRRS ジャック MJ-4PP-9 x2
- 2 ピンタクトスイッチ x2
- コンスルー付き ProMicro x2セット
- M2 ナット x20
- M2 ネジ 22mm x20 (プレートを全て使う場合)

## ケースのカスタマイズについて

- 底板を省略すると、一部の電子部品がむき出しになってしまう代わりにキーボードの高さを 2mm 抑えることができます
- トップフレームは 2mm 厚、3mm 厚のものが付属します。両方使って 5mm としてもいいですし、片方あるいは両方を省略することもできます

一部のプレートを省略する場合は、それに合わせてネジの長さも調節してください。

## 組み立て
### スイッチ以外の電子部品類の実装

![電子部品類を実装](images/components.jpg)

1. リバーシブル基板なので、二枚の基板のうち片方を裏返しておく（右右や左左キーボードを作らないように！！）
2. ダイオードを半田付け x38 （基板の四角で囲まれている側 と、ダイオードの線の入っている側を合わせてください）
3. ダイオードを半田付けした面と同じ面から TRRS ジャック・リセットスイッチを刺して、半田付け x各2

### Pro Micro の実装

![Pro Micro を実装](images/promicro.jpg)

前作同様、 Pro Micro の実装向きが特殊なので注意してください。

1. 基板を裏返して、スイッチを実装した面が下に来るようにする
2. 基板にコンスルーを差し込む x4 （向きは Helix のビルドガイドなど参照。半田付けは不要）
3. 基板上の「TX」の目印に合わせて、コンスルーに ProMicro を載せる（左右のキーボードで ProMicro の裏表が逆になっていれば ok … 左手は ProMicro の部品面を２枚の基板で挟み込むように、右手は部品面がむき出しになるはず）
4. ProMicro とコンスルーの間だけを半田付け
5. ファームを焼いて動作確認

サンプルのファームウェアは https://github.com/zk-phi/qmk_firmware に kastor という名前で入っています。

: make kastor/rev2:phi:avrdude

ケーブル類を接続した状態でスイッチを取り付ける穴をピンセットなどで直接短絡させ、無事キー入力ができれば ok です。

### スイッチの実装

Pro Micro を外し、スイッチを実装します。まずはトッププレート・ローワートッププレートの向きを合わせます。紛らわしいので注意してください。

![ネジ穴がずれている](images/incorrect_plate.jpg)

1. 基板を裏返して、上の手順で部品を実装した面が下側に来るようにする
2. TRRS ジャックやリセットスイッチの足が飛び出しているところにちょうど穴がくるようにローワートッププレートを重ねる
3. ローワートッププレートとネジ穴がぴったり合うようにトッププレートを重ねる

プレートの正しい向きがわかったら、スイッチを取り付けてゆきます。

1. トッププレート側から２枚を貫通するようにスイッチをセット
2. スイッチをプレートごと基板に挿入
3. Pro Micro のくる位置にあるスイッチだけは足をカット

スイッチを半田付けしてしまうと、半田をはがさない限りプレートの向きを直すことができなくなります。念のため再度向きを確認した上、半田付けしましょう。

### ケースを組み立てる

![組み立て](images/assemble.png)

下から

- 底板
- ボトムプレート
- ローワーミドルフレーム
- ミドルフレーム 上側・下側
- 実装済みの基板＆トッププレート
- 好みの枚数のトップフレーム

をこの順に重ね、ネジで貫通・ナットで留めます。ミドルフレームの上側を除く全てのパーツで左右の別・向きがあります。ネジ穴がぴったり重なっていて、部品に干渉していなければ正しく積めています。

仕上げにゴム足を貼り付ければ完成です。
